<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Random Walker</title>
<link rel="stylesheet" href="styles/common.css">
</head>
<body>
<canvas id="stage"></canvas>
<script src="js/common.js"></script>
<script>
const Walker = ( _ => {
    return class {
        constructor(canvasId){
	        const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            const width = window.innerWidth, height = window.innerHeight;
            this.ctx = ctx;
	        ctx.canvas.width = width;
	        ctx.canvas.height = height;
	        this.x = width / 2;
	        this.y = height / 2;

	        ctx.beginPath();
	        ctx.strokeStyle = '#fff';
	        ctx.moveTo(this.x, this.y);
	        this.mouse = {x:0,y:0};
	        var self = this;
	        canvas.addEventListener('mousemove', function(e) {
		        self.mouse.x = e.pageX;
		        self.mouse.y = e.pageY;
	        });
        }
        walk() {
	        const r = Math.random();
	        const t = rand(0,5);
	        if ( r < 0.5 ) {
		        if ( r < 0.05 ) this.x+=t;
		        else if ( r < 0.10 ) this.x+=t, this.y+=t;
		        else if ( r < 0.15 ) this.x+=t, this.y-=t;
		        else if ( r < 0.2 ) this.x-=t;
		        else if ( r < 0.25 ) this.x-=t, this.y+=t;
		        else if ( r < 0.3 ) this.x-=t, this.y-=t;
		        else if ( r < 0.35 ) this.y+=t;
		        else if ( r < 0.4 ) this.y-=t;
	        } else { 
		        if ( this.x < this.mouse.x ) this.x+=t;
		        else if ( this.x > this.mouse.x ) this.x-=t;
		        if ( this.y < this.mouse.y ) this.y+=t;
		        else if ( this.y > this.mouse.y ) this.y-=t;
	        }
        }
        render() {
	        this.ctx.lineTo(this.x, this.y);
	        this.ctx.stroke();
        } 
    };
})();
const walker = new Walker('stage');
setInterval(function() {
	walker.walk();
	walker.render();
}, 16);
</script>
</body>
</html>
